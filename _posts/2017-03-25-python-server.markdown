---
layout: post
title: python创建http服务器
date: 2017-03-25
---

对于一个全栈工程师而言，需要学习的东西非常多，当然掌握的越多你就越有话语权，
你要是十八般武艺样样精通那就最好不过了。掌握的技术或者方法越多，你解决问题的方法也就越多。

很久以前发现项目组的绝大多数人web开发效率很低，究其原因竟是他们的计算机上都没安装过tomcat等服务器，
不管是需求开发还是问题定位都要去项目组的开发环境上调试。这个现象太恐怖了，虽然我们公司比较土豪，
一个项目组根据各种局点的要求搭建了不同的开发、测试环境，但是还是经常会出现环境使用冲突，
大家都不知道对方替换了代码。还有一个原因是，我们为了解决浏览器缓存，在编译打包的时候就给安装包中
绝大多数的静态文件名加了数字签名，如果替换的文件比较多，那很容易出错而且非常耗时。


当然由于我从入行开始就是做web开发的，所以绝大多数的时候我都是使用自己本地的tomcat调试。但是tomcat
安装和配置比较麻烦，而且启动比较耗时，不利于项目组内共享。于是，针对这个问题我用node.js开发了一个静态服务器。
当有一天我兴高采烈地将它在公司内分享时，有人给我泼了凉水，他说用python一条命令就可以实现你这个功能。
当时那个羞啊。。我们项目组中一个微服务就是完全用python实现的，我也开发过一些python需求，但是对这个功能确实一点都不知道。
于是，下来在windows操作了下，具体如下：

假设我们要让目录C:\Users\1\Desktop\serv 成为web服务器的根目录，那么在该路径下执行命令：
```
C:\Users\1\Desktop\serv> python -m SimpleHTTPServer
Serving HTTP on 0.0.0.0 port 8000 ...
```

命令行执行后看到这个上面的内容，说明服务器启动了，HTTP服务在8000号端口上侦听。
然后在浏览器访问 http://127.0.0.1:8000/ 即可，如果需要别人访问，那只需要替换URL中的ip即可。


如果该目录下有一个叫index.html 的文件名的文件，那么这个文件就会成为一个默认web页；
如果没有这个文件，那么目录列表就会显示出来（我们可以在该目录下放置各种文件，让别人通过URL访问即可实现文件共享）。
如果想改变端口号，你可以使用如下的命令：

```
C:\Users\1\Desktop\serv> python -m SimpleHTTPServer 5000
Serving HTTP on 0.0.0.0 port 5000 ...
```

服务器启动后，所有的请求都可以在cmd中看到日志，内容类似于：
```
127.0.0.1 - - [25/Mar/2017 23:23:22] "GET /index.txt HTTP/1.1" 200 -
127.0.0.1 - - [25/Mar/2017 23:23:22] code 404, message File not found
127.0.0.1 - - [25/Mar/2017 23:23:22] "GET /favicon.ico HTTP/1.1" 404 -
```

如果服务器启动失败，请先检查自己计算机是否正确安装了python，如果是，那很有可能是端口号冲突了，请换个端口试试。

